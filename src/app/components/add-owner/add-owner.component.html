<md-progress-bar *ngIf="progressBar" mode="indeterminate"></md-progress-bar>
<div class="card-container">
  <div class="card mat-elevation-z1">
    <div class="form-container" *ngIf="addedSuccessfully !== 'success'">
      <mwc-personal-data-form [personalDataForm]="owner.personalData"></mwc-personal-data-form>
      <mwc-contact-data-form [contactDataForm]="owner.contactData" (sameAddress)="sameCorrespondenceAddress()"></mwc-contact-data-form>
      <div>
        <div class="header">
          Udzielone pełnomocnictwa
        </div>
        <div *ngFor="let auth of owner.authData">
          <mwc-authorizations-data-form [editionDisabled]="true" [authDataForm]="auth"></mwc-authorizations-data-form>
          <div class="auth-button-container" style="margin-bottom: 16px;">
            <button type="button" class="add-button accent" md-raised-button color="primary" (click)="removeAuth(auth)">Wykasuj pełnomocnictwo</button>
            <button type="button" class="add-button accent" md-raised-button color="primary" (click)="editAuth(auth)">Edytuj pełnomocnictwo</button>
          </div>
          <div class="clearfix"></div>
        </div>
        <div class="auth-button-container">
          <button type="button" class="add-button accent" md-raised-button color="primary" (click)="addAuth()">Dodaj {{owner.authData?.length > 0 ? 'kolejne' : ''}} pełnomocnictwo</button>
        </div>
      </div>
      <div>
        <div class="header">
          Działki
        </div>
        <div *ngFor="let pd of owner.parcelsData">
          <mwc-owner-parcel-form [parcelData]="pd" [editionDisabled]="true"></mwc-owner-parcel-form>
          <div class="auth-button-container" style="margin-bottom: 16px;">
            <button type="button" class="add-button accent" md-raised-button color="primary" (click)="removeParcel(pd)">Wykasuj działkę</button>
            <button type="button" class="add-button accent" md-raised-button color="primary" (click)="editParcel(pd)">Edytuj działkę</button>
          </div>
          <div class="clearfix"></div>
        </div>
        <div class="auth-button-container">
          <button type="button" class="add-button accent" md-raised-button color="primary" (click)="addParcel()">Dodaj {{owner.parcelsData?.length > 0 ? 'kolejną' : ''}} Działkę</button>
        </div>
      </div>
      <div class="clearfix"></div>

      <!-- Formularz z podpięciem istniejących działek Podpięcie do istniejących działek -->
      <div class="button-container col-md-12">
        <span *ngIf="(!owner.historicSaldo.capital && owner.historicSaldo.capital !== 0 )|| (!owner.historicSaldo.costs && owner.historicSaldo.costs !== 0 ) || (!owner.historicSaldo.interest && owner.historicSaldo.interest !== 0 ) || !owner.historicSaldo.untilDate || (
          ((!owner.personalData.name || !owner.personalData.surname) && owner.personalData.type === 'person') || ((!owner.personalData.name || !owner.personalData.nip) && owner.personalData.type === 'company'))"
          class="invalid-info">Wypełnij wszystkie wymagane (oznaczone *) pola</span>
        <button type="button" [disabled]="(!owner.historicSaldo.capital && owner.historicSaldo.capital !== 0 )|| (!owner.historicSaldo.costs && owner.historicSaldo.costs !== 0 ) || (!owner.historicSaldo.interest && owner.historicSaldo.interest !== 0 ) || !owner.historicSaldo.untilDate || (
          ((!owner.personalData.name || !owner.personalData.surname) && owner.personalData.type === 'person') || ((!owner.personalData.name || !owner.personalData.nip) && owner.personalData.type === 'company'))"
          class="add-button accent" md-raised-button color="accent" (click)="add()">Dodaj</button>
      </div>
    </div>

    <div *ngIf="addedSuccessfully === 'success'" class="info">
      <mwc-info [link]="'add/owner'" [text]="'Dodano pomyślnie'" [buttonText]="'Dodaj kolejnego'" [success]="true" (click)="init();"></mwc-info>
    </div>
  </div>
</div>
