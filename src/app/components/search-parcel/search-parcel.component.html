<md-progress-bar *ngIf="progressBar" mode="indeterminate">
</md-progress-bar>
<div class="card-container">
  <div class="card mat-elevation-z1">
    <div class="form-container fixed">
      <div class="row">
        <div class="header col-md-2">
          Wybierz spółkę
        </div>
        <div class="header col-md-2" *ngIf="ps.companyId">
          Wybierz sekcję
        </div>
        <div class="col-md-1 form-row">
        </div>
        <div class="header col-md-6" *ngIf="ps.companyId">
          Wyszukiwanie
        </div>
        <div class="clearfix"></div>
        <div class="col-md-2 form-row">
          <form>
            <md-select name="first" placeholder="SPÓŁKA" [(ngModel)]="ps.companyId">
              <md-option *ngFor="let c of currentUser?.companies" [value]="c.id" (click)="getCompanySections()">
                {{ c.name }}
              </md-option>
            </md-select>
          </form>
        </div>
        <div class="col-md-2 form-row" *ngIf="ps.companyId">
          <form>
            <md-select name="first" placeholder="SEKCJA" [(ngModel)]="ps.sectionId">
              <md-option *ngFor="let s of sections" [value]="s.id" (click)="getSectionParcels()">
                {{ s.name }}
              </md-option>
            </md-select>
          </form>
        </div>
        <div class="col-md-1 form-row" *ngIf="ps.companyId">
        </div>
        <div class="col-md-2 form-row" *ngIf="ps.companyId">
          <md-form-field>
            <input class="textbox" (keypress)="onKeyDownNumber($event)" type="text" mdInput placeholder="Wyszukaj po numerze" [(ngModel)]="ps.searchString">
          </md-form-field>
        </div>
        <div class="col-md-2 form-row" *ngIf="ps.companyId">
          <md-form-field>
            <input class="textbox" (keypress)="onKeyDownCity($event)" type="text" mdInput placeholder="Wyszukaj po mieście" [(ngModel)]="ps.secondSearchString">
          </md-form-field>
        </div>
        <div class="col-md-2" *ngIf="ps.companyId">
          <button md-raised-button color="primary" (click)="ps.searchParcels(ps.unionId, ps.companyId, ps.sectionId)">Wyszukaj {{ ((ps.searchString && ps.searchString.length > 0) || (ps.secondSearchString && ps.secondSearchString.length
            > 0)) ? '' : 'wszystkie' }}</button>
        </div>
      </div>
      <div class="row" *ngIf="ps.companyId">
        <div class="col-md-2 header" (click)="sortByNumber()">numer działki</div>
        <div class="col-md-2 header" (click)="sortByAreaType() ">typ powierzchni</div>
        <div class="col-md-2 header" (click)="sortByAreaSurface()">powierzchnia [ha]</div>
        <div class="col-md-2 header" (click)="sortByAreaSurface()">miasto</div>
      </div>
      <div *ngFor="let p of ps.parcels">
        <div class="row" *ngIf="selectedSectionId" (click)="showChosenParcel(p)">
          <div class="col-md-2 ">{{p.number}}</div>
          <div class="col-md-2 ">{{p.areaType}}</div>
          <div class="col-md-2 ">{{p.areaSurface}}</div>
          <div class="col-md-2 ">{{p.cityId}}</div>
        </div>
      </div>
      <!-- <div *ngIf="ps.moreToBeLoadedIndicator">
        <div class="row bordered in-the-bottom on-the-right result" (click)="loadMore()">
          <div class="card-field" style="float:left; width:100%">
            <div class="col-md-2">Pokaż więcej</div>
          </div>
        </div>
      </div> -->
    </div>
  </div>
</div>
